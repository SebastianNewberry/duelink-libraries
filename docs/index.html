<!DOCTYPE html>
<html lang="en">
<header>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>DUE's Demo</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <style>
        .center {
            padding: 10px;
        }

        #tab1,
        #tab2,
        #tab3,
        #tab4,
        #tab5,
        #tab6 {
            text-align: center;
            float: left;
            padding: 5px 10px 5px 10px;
            background: #666666;
            color: #ffffff;
            margin: 0px 5px 0px 5px;
            cursor: pointer;
            border-radius: 9px;
        }

            #tab1:hover,
            #tab2:hover,
            #tab3:hover,
            #tab4:hover,
            #tab5:hover,
            #tab6:hover {
                background: #ffaa55;
            }

        #tab1Content {
            widt5: auto;
            height: 410px;
            padding: 10px;
            border: 1px solid #0977aa;
            border-radius: 10px;
        }

        #tab2Content {
            width: auto;
            height: 430px;
            padding: 10px;
            border: 1px solid #0977aa;
            border-radius: 10px;
        }

        #tab3Content {
            width: auto;
            height: 200px;
            padding: 10px;
            border: 1px solid #0977aa;
            border-radius: 10px;
        }

        #tab4Content {
            width: auto;
            height: 250px;
            padding: 10px;
            border: 1px solid #0977aa;
            border-radius: 10px;
        }

        #tab5Content {
            width: auto;
            height: 250px;
            padding: 10px;
            border: 1px solid #0977aa;
            border-radius: 10px;
        }

        #tab6Content {
            width: auto;
            height: 450px;
            padding: 10px;
            border: 1px solid #0977aa;
            border-radius: 10px;
        }

        #tab1Content,
        #tab2Content,
        #tab3Content,
        #tab4Content,
        #tab5Content,
        #tab6Content {
            display: none;
        }


        .rangeslider {
            width: 100%;
            margin: auto;
            text-align: center;
        }

        .myslider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            outline: none;
            opacity: 0.7;
            transition: opacity .15s ease-in-out;
            border-radius: 10px;
        }

            .myslider:hover {
                opacity: 1;
            }

            .myslider::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 25px;
                height: 25px;
                background: #666666;
                cursor: pointer;
                border-radius: 50%;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                transition: background .3s ease-in-out;
            }

            .myslider::-moz-range-thumb {
                width: 25px;
                height: 25px;
                background: #666666;
                cursor: pointer;
                border-radius: 50%;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                transition: background .3s ease-in-out;
            }

            .myslider::-webkit-slider-thumb:hover {
                background: #2596be;
            }

            .myslider::-moz-range-thumb:hover {
                background: #2596be;
            }

        h1 {
            text-align: center;
            color: #34495E;
        }

        p {
            text-align: center;
            font-size: 18px;
            color: #34495E;
        }

        #demo {
            font-weight: bold;
            color: #2596be;
        }

        .rangesliderServo {
            width: 100%;
            margin: auto;
            text-align: center;
        }

        .mysliderServo {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            outline: none;
            opacity: 0.7;
            transition: opacity .15s ease-in-out;
            border-radius: 10px;
        }

            .mysliderServo:hover {
                opacity: 1;
            }

            .mysliderServo::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 25px;
                height: 25px;
                background: #666666;
                cursor: pointer;
                border-radius: 50%;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                transition: background .3s ease-in-out;
            }

            .mysliderServo::-moz-range-thumb {
                width: 25px;
                height: 25px;
                background: #666666;
                cursor: pointer;
                border-radius: 50%;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                transition: background .3s ease-in-out;
            }

            .mysliderServo::-webkit-slider-thumb:hover {
                background: #2596be;
            }

            .mysliderServo::-moz-range-thumb:hover {
                background: #2596be;
            }


        #demoServo {
            font-weight: bold;
            color: #2596be;
        }
    </style>
</header>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="navbar-brand">
            <div>
                <svg id="logo" class="h-6 w-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 266" preserveAspectRatio="xMidYMid meet" aria-hidden="true" style="display: block; transform: scale(1,-1)">
                    <g transform="translate(0, 400) scale(1, -1) rotate(0 0 0)" fill="grey" stroke="none">
                        <path d="M1132.1,156.6H643.8c0,0,0-0.1,0-0.1H137c-28.8,59.1-38.2,119.4-23.4,181.1l103.8,0
				c71.1,0,87.3-132.9-0.2-118.4l-16.7,81.5l-39.4,0.2l21-109.1l2.3-0.6c195-39.1,160.1,179.8,29.1,179.4l-89.5,0.3
				c3.7,9.8,8,19.6,13,29.4h506.7c0-0.1,0.1-0.2,0.1-0.3h486.7c19.4-37,30.4-78.9,30.4-123.2C1161,233.7,1150.6,192.9,1132.1,156.6z
				 M477.3,313.7c-15.6,82.2-149.3,72.5-137.2-0.5l20.6-124h40.5l-19.3,103.4c-11.2,60.1,50.4,60.4,59.6,11.8l21.9-115.2H501
				L477.3,313.7z M617.9,334.3l-7.5,34.7H501l21.1-109.4h102.3l-6.8,32.9h-62.9l-8.4,41.8H617.9z M672,223.5H528.4l6.8-34.3
				l143.2-0.2L672,223.5z M779.5,371.3h-98.9L712,189.1h35.3l-25.5,148.1h63.6L779.5,371.3z M833.9,371.3h-35.3l22.8-132.2h35.3
				L833.9,371.3z M843.5,222.7h-0.2c-9.6,0-16.9-7.3-16.9-18.9c0.2-13.2,9.6-22.2,20.4-22.2c10.3,0,17.7,7.6,17.7,19.2
				C864.4,214.5,854.8,222.7,843.5,222.7z M985.6,294.6l-13.3,76.8H937l12.5-73.3c0.7-4.6,1.2-10,1.2-14.9c0-9.2-2.9-15.7-11.8-15.7
				c-11.5,0-25,15.9-29.9,45.1L899,371.3h-35.3l15.2-89.2c2.9-16.8,4.9-31.4,6.4-43h31.4l-2.5,21.9h0.5
				c11.3-17.3,26.3-24.9,42.2-24.9c19.6,0,30.7,13.2,30.7,36C987.6,278.1,986.6,288.1,985.6,294.6z M1117.9,371.3h-39.3l-21.1-56.5
				l-13.3,14.1l-7.4,42.4h-35.1l32.9-191.9h35.1l-19.6,114.9h0.5c3.7-5.1,7.4-10.3,10.8-15.1l30.7-40h43.4l-51,54.3L1117.9,371.3z" />
                    </g>
                </svg>
            </div>
            <div class="d-inline align-middle">Demo Application</div>
        </div>
    </nav>

    <div id="id-connect" class="alert alert-primary" role="alert">
        <span>
            <svg class="align-middle mr-2" focusable="false" width="24" height="24" aria-hidden="true">
                <path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z">
                </path>
            </svg>
        </span>
        Press
        <button class="btn btn-outline-primary ml-1 mr-1" onclick="connect()">
            <span>
                <svg class="align-middle" focusable="false" width="24" height="24" aria-hidden="true">
                    <path d="M15 7v4h1v2h-3V5h2l-3-4-3 4h2v8H8v-2.07c.7-.37 1.2-1.08 1.2-1.93 0-1.21-.99-2.2-2.2-2.2-1.21 0-2.2.99-2.2 2.2 0 .85.5 1.56 1.2 1.93V13c0 1.11.89 2 2 2h3v3.05c-.71.37-1.2 1.1-1.2 1.95 0 1.22.99 2.2 2.2 2.2 1.21 0 2.2-.98 2.2-2.2 0-.85-.49-1.58-1.2-1.95V15h3c1.11 0 2-.89 2-2v-2h1V7h-4z">
                    </path>
                </svg>
            </span>
        </button>
        to connect to your device
    </div>

    <div id="id-selections" class="container">
        <fieldset id="id-inputs" class="border p-3" disabled="true">



            <!-- TABS -->
            <div id="tab1" onClick="JavaScript:selectTab(1);">Digital</div>
            <div id="tab2" onClick="JavaScript:selectTab(2);">Analog</div>
            <div id="tab3" onClick="JavaScript:selectTab(3);">Sound</div>
            <div id="tab4" onClick="JavaScript:selectTab(4);">Servo</div>
            <div id="tab5" onClick="JavaScript:selectTab(5);">NeoPixel</div>
            <div id="tab6" onClick="JavaScript:selectTab(6);">Display</div>
            <br />

            <!-- Digital Tab -->
            <div id="tab1Content">
                <!-- Digital Write  -->
                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>Digital Write</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="109">Pin</td>
                                        <td width="97">
                                            <select id="pinNumberDigitalWrite">
                                                <option value="108">LED</option>
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="109">Value</td>
                                        <td width="97">
                                            <select id="valueDigitalWrite">
                                                <option value="1">true</option>
                                                <option value="0">false</option>
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                                <button class="btn btn-primary" onclick="digitalWrite()">SET</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Digital Read -->
                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>Digital Read</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="125">Pin</td>
                                        <td width="113">
                                            <select id="pinNumberDigitalRead">
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="125">Pull</td>
                                        <td width="113">
                                            <select id="pullDigitalRead">
                                                <option value="0">None</option>
                                                <option value="1">Up</option>
                                                <option value="2">Down</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                    <tr>
                                        <td width="125">Return: <span id="digitalReadReturn"></span></td>
                                        <td width="113">
                                        </td>
                                    </tr>
                                    </tr>
                                </table>

                                <button class="btn btn-primary" onclick="digitalRead()">READ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analog Tab -->
            <div id="tab2Content">
                <!-- Analog Write -->
                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>Analog Write</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="176">Pin</td>
                                        <td width="62">
                                            <select id="pinNumberAnalogWrite">
                                                <option value="108">LED</option>
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    <tr>
                                        <td>

                                            <div class="rangeslider">
                                                <input type="range" min="0" max="100"
                                                       value="50" class="myslider"
                                                       id="sliderRange">
                                                <p>Value: <span id="demo"></span></p>
                                            </div>

                                            <script>
                                                let rangeslider = document.getElementById("sliderRange");
                                                let output = document.getElementById("demo");
                                                output.innerHTML = rangeslider.value;

                                                rangeslider.oninput = function () {
                                                    output.innerHTML = this.value;
                                                }
                                            </script>
                                        </td>
                                    </tr>
                                    </tr>
                                </table>

                                <button class="btn btn-primary" onclick="analoglWrite()">SET</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analog Read -->
                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>Analog Read</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="109">Pin</td>
                                        <td width="129">
                                            <select id="pinNumber">
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="109">Return: <span id="analogReadReturn"></span></td>
                                        <td width="129">
                                        </td>
                                    </tr>
                                </table>
                                <button class="btn btn-primary" onclick="analoglRead()">READ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sound Tab -->
            <div id="tab3Content">

                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>Sound</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="125">Pin</td>
                                        <td width="144">
                                            <select id="pinNumberSound">
                                                <option value="112">Piezo</option>
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="125">Duration</td>
                                        <td width="144">
                                            <select id="playNote">
                                                <option value="130">C - 130Hz</option>
                                                <option value="146">D - 146Hz</option>
                                                <option value="164">E - 164Hz</option>
                                                <option value="174">F - 174Hz</option>
                                                <option value="196">G - 196Hz</option>
                                                <option value="220">A - 220Hz</option>
                                                <option value="246">B - 246Hz</option>
                                                <option value="261">C - 261Hz</option>
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                                <button class="btn btn-primary" onclick="playSound()">BEEP</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Servo Tab -->
            <div id="tab4Content">

                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>Servo Motor</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="176">Pin</td>
                                        <td width="62">
                                            <select id="pinNumberServo">
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    <tr>
                                        <td>
                                            <style>
                                            </style>

                                            <div class="rangesliderServo">
                                                <input type="range" min="0" max="180"
                                                       value="90" class="mysliderServo"
                                                       id="sliderRangeServo">
                                                <p>Value: <span id="demoServo"></span></p>
                                            </div>

                                            <script>
                                                let rangesliderServo = document.getElementById("sliderRangeServo");
                                                let output2 = document.getElementById("demoServo");
                                                output2.innerHTML = rangesliderServo.value;

                                                rangesliderServo.oninput = function () {
                                                    output2.innerHTML = this.value;
                                                }
                                            </script>
                                        </td>
                                    </tr>
                                    </tr>
                                </table>

                                <button class="btn btn-primary" onclick="setServo()">SET</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NeoPixel Tab -->
            <div id="tab5Content">
                <div class="row">
                    <div class="center">
                        <div class="center">
                            <label>NeoPixel</label>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="136">Pin</td>
                                        <td width="152">
                                            <select id="pinNumberNeoPixel">
                                                <option value="0">P0</option>
                                                <option value="1">P1</option>
                                                <option value="2">P2</option>
                                                <option value="3">P3</option>
                                                <option value="4">P4</option>
                                                <option value="5">P5</option>
                                                <option value="6">P6</option>
                                                <option value="7">P7</option>
                                                <option value="8">P8</option>
                                                <option value="9">P9</option>
                                                <option value="10">P10</option>
                                                <option value="11">P11</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>LED Count</td>
                                        <td><input id="ledCount" type="number" value="4"></td>
                                    </tr>
                                </table>
                                <button class="btn btn-primary" onclick="neoPixelPulse()">PULSE</button>

                                <button class="btn btn-primary" onclick="neoPixelRainbow()">RAINBOW</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Display Tab -->
            <div id="tab6Content">

                <div class="row">

                    <div class="center">
                        <label>Display</label>
                        <div class="center">
                            <p>
                                <canvas id="surface" width="128" height="64" style="width: 300px; height: 160px; background-color: black;">
                                </canvas>
                            </p>
                        </div>
                        <div class="center">
                            <label>Input text:</label>
                            <input type="text" id="textsendid" name="textsendname" value="Hello world!" />
                            <button class="btn btn-primary" onclick="sendText()">SHOW </button>
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="285">
                                    <tr>
                                        <td width="92">Font</td>
                                        <td width="181">
                                            <select id="fontName">
                                                <option value="Arial">Arial</option>
                                                <option value="Verdana">Verdana</option>
                                                <option value="Tahoma">Tahoma</option>
                                                <option value="Trebuchet MS">Trebuchet MS</option>
                                                <option value="Times New Roman">Times New Roman</option>
                                                <option value="Georgia">Georgia</option>
                                                <option value="Garamond">Garamond</option>
                                                <option value="Courier New">Courier New</option>
                                                <option value="Brush Script MT">Brush Script MT</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Font size</td>
                                        <td><input id="fontSize" type="number" value="12"></td>
                                    </tr>
                                </table>
                                <button class="btn btn-primary" onclick="sentTextAsDrawing()">SHOW AS IMAGE</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <p>&nbsp;</p>
    </div>

    <div id="id-status" style="display:none">
        <div class="alert alert-success" role="alert">
            <span>
                <svg class="align-middle mr-2" style="fill:Green" focusable="false" width="24" height="24"
                     aria-hidden="true">
                    <path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z">
                    </path>
                </svg>
            </span>
            <span id="status-message"></span>
        </div>
    </div>

    <div id="id-error" style="display: none;">
        <div class="alert alert-danger" role="alert">
            <span>
                <svg class="align-middle mr-2" style="fill:red" focusable="false" width="24" height="24"
                     aria-hidden="true">
                    <path d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z">
                    </path>
                </svg>
            </span>
            <span id="error-message"></span>
        </div>
    </div>


</body>

</html>

<script>
    import("./serialweb.js").then(mod => serial = mod);
    import("./duelink.js").then(mod => due = mod);
    // A $( document ).ready() block.

    // Get canvas context
    let canvas = document.getElementById("surface");
    let ctx = canvas.getContext("2d", { willReadFrequently: true });
    let color_depth = 1;

    function selectTab(tabIndex) {
        //Hide All Tabs
        document.getElementById("tab1Content").style.display = "none";
        document.getElementById("tab2Content").style.display = "none";
        document.getElementById("tab3Content").style.display = "none";
        document.getElementById("tab4Content").style.display = "none";
        document.getElementById("tab5Content").style.display = "none";
        document.getElementById("tab6Content").style.display = "none";
        //Show the Selected Tab
        document.getElementById("tab" + tabIndex + "Content").style.display =
            "block";
    }


    function Check() {
        if (!this.BrainPad)
            this.BrainPad = new due.DUELinkController(new serial.WebSerial());
    }


    async function connect() {
        try {
            hideError();
            Check();
            await BrainPad.Connect();
            if (BrainPad.IsRave) {
                color_depth = 16;
                canvas.width = 160;
                canvas.height = 120;
                canvas.style.width = '320px';
                canvas.style.height = '240px';
            } else if (BrainPad.IsEdge) {
                await BrainPad.Display.Configuration(0, 0x3c);
            }
            $("#id-version").text(BrainPad.Version);
            $("#id-connect").slideUp();
            $("#id-inputs").prop("disabled", false);

        } catch (e) {
            showError("connect Error" + e);
        }
    }

    async function digitalWrite() {
        Check();
        var pinSelectedDWrite = $("#pinNumberDigitalWrite").val();
        var valueSelectedDwrite = $("#valueDigitalWrite").val();
        var pinDWrite = pinSelectedDWrite / 1;
        var valueDWrite = valueSelectedDwrite / 1;
        await BrainPad.Digital.Write(pinDWrite, valueDWrite);
    }

    async function digitalRead() {
        Check();
        var pinSelectedDigitalRead = $("#pinNumberDigitalRead").val();
        var pullSelectedDigitalRead = $("#pullDigitalRead").val();
        var pinDRead = pinSelectedDigitalRead / 1;
        var pullDRead = pullSelectedDigitalRead / 1;



        var returnDigitalRead = await BrainPad.Digital.Read(pinDRead, pullDRead);

        document.getElementById("digitalReadReturn").innerHTML = returnDigitalRead;
    }

    async function analoglWrite() {
        Check();
        var pinSelectedAWrite = $("#pinNumberAnalogWrite").val();
        var valueSelectedAWrite = $("#valueAnalogWrite").val();
        var pinAWrite = pinSelectedAWrite / 1;
        let rangeslider = document.getElementById("sliderRange");
        let output = document.getElementById("demo");
        output.innerHTML = rangeslider.value;

        rangeslider.oninput = function () {
            output.innerHTML = this.value;
        }
        var valueRange = rangeslider.value;
        var aValue = valueRange / 1;
        await BrainPad.Analog.Write(pinAWrite, aValue);
    }


    async function setServo() {
        Check();
        var pinSelectedServo = $("#pinNumberServo").val();
        var valueSelectedServo = $("#valueServo").val();
        var pinServo = pinSelectedServo / 1;
        let rangesliderServo = document.getElementById("sliderRangeServo");
        let output2 = document.getElementById("demoServo");
        output2.innerHTML = rangesliderServo.value;

        rangesliderServo.oninput = function () {
            output2.innerHTML = this.value;
        }
        var valueRangeServo = rangesliderServo.value;
        var servoValue = valueRangeServo / 1;
        await BrainPad.Servo.Set(pinServo, servoValue);
    }

    async function analoglRead() {
        Check();
        var returnAnalogRead = await BrainPad.Analog.Read(0);
        document.getElementById("analogReadReturn").innerHTML = returnAnalogRead;
    }


    async function playSound() {
        Check();
        var pinSelectedSound = $("#pinNumberSound").val();
        var noteSelectedSound = $("#playNote").val();
        var pinSound = pinSelectedSound / 1;
        var noteSoundValue = noteSelectedSound / 1;
        await BrainPad.Frequency.Write(pinSound, noteSoundValue, 500);
    }


    async function sentTextAsDrawing() {
        Check();
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";

        let fontName = document.getElementById("fontName").value;
        let fontSize = document.getElementById("fontSize").value;
        let text = document.getElementById("textsendid").value;

        ctx.font = fontSize + "px " + fontName;
        ctx.fillText(text, 0, (canvas.height + parseInt(fontSize)) / 2);

        let frameBuffer = ctx.getImageData(0, 0, canvas.width, canvas.height);
        await BrainPad.Display.DrawBuffer(frameBuffer.data, color_depth);
    }



    async function sendText() {
        Check();
        await BrainPad.Display.Clear(0);
        var msg = $("#textsendid").val();
        await BrainPad.Display.DrawText(msg, 1, 1, 1);
        await BrainPad.Display.Show();
    }

    function hideError() {
        $("#id-error").hide();
    }

    function showStatus(message) {
        $("#id-inputs").prop("disabled", true);
        hideError();
        $("#id-status").show();
        $("#status-message").text(message);
        $.when($("#id-status").fadeOut(1000)).done(
            function () { $("#id-inputs").prop("disabled", false); }
        );
    }

    function showError(message) {
        $("#id-inputs").prop("disabled", true);
        $("#id-error").show();
        $("#error-message").text(message);
    }
</script>




